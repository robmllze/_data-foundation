//.title
// ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
//
// GENERATED BY XYZ_GENIE
// See: https://github.com/robmllze/xyz_gen
//
// ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
//.title~

import '/_common.dart';

part '_model_entry.g.dart';

// ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░

const MODEL_ENTRY_FIELDS = {
  ...MODEL_DISPLAY_FIELDS,
  ('archived_g_reg?', ModelRegistration),
  ('created_g_reg?', ModelRegistration),
  ('deleted_g_reg?', ModelRegistration),
  ('updated_g_reg?', ModelRegistration),
  ('expires_at?', DateTime),
};

@GenerateModel(
  shouldInherit: true,
  fields: MODEL_ENTRY_FIELDS,
)
abstract class _ModelEntry extends Model implements ModelDisplay {}

// ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░

extension ModelEntryExtension on ModelEntry {
  //
  //
  //

  bool isGloballyMarkedAsArchived() => this.archivedGReg?.impliesEnabled == true;
  bool isGloballyMarkedAsCreated() => this.createdGReg?.impliesEnabled == true;
  bool isGloballyMarkedAsDeleted() => this.deletedGReg?.impliesEnabled == true;
  bool isGloballyMarkedAsUpdated() => this.updatedGReg?.impliesEnabled == true;

  bool isExpired() => this.expiresAt?.isBefore(DateTime.now()) ?? false;

  bool isObsolete() =>
      this.isGloballyMarkedAsArchived() || this.isGloballyMarkedAsDeleted() || this.isExpired();
}
